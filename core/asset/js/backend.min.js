function annonceInit(){annonceInitMap()}function annonceInitMap(){var n=jQuery("#annonces-map-wrapper");jQuery(n).each(function(){annonceCreateMap(jQuery(this))})}function annonceCreateMap(n){var e,a,t,o,r,i,s;null!=n&&0!=n.length&&(e=n,a=jQuery(e).find("marker"),r=new google.maps.LatLng(a.attr("lat"),a.attr("lng")),t=[],n={zoom:8,center:r,fullscreenControl:!(o=[])},r=e.data("map"),i=!1,s=new google.maps.Map(jQuery(e).find("#annonces-google-map")[0],jQuery.extend(n,r)),jQuery(a).each(function(){var n=annonceCreateMarker(s,jQuery(this)),a=annonceCreateInfoWindow(jQuery(this));0!=jQuery(this).html().length&&n.addListener("click",function(){i&&i.close(),(i=a).open(e,n)}),t.push(n),o.push(jQuery(this))}),jQuery(".annonces-taxonomies .taxonomy-label").on("click",function(){jQuery(this).hasClass("active")?(annonceDisplayMapMarkers(o,t,null,jQuery(this).attr("data-id").split(",")),jQuery(this).removeClass("active"),jQuery(this).next(".taxonomies-child").find(".taxonomy-label").removeClass("active")):(annonceDisplayMapMarkers(o,t,s,jQuery(this).attr("data-id").split(",")),jQuery(this).addClass("active"),jQuery(this).next(".taxonomies-child").find(".taxonomy-label").addClass("active"))}))}function annonceCreateMarker(n,a){var e=n,n=a,a={lat:Number(n.attr("lat")),lng:Number(n.attr("lng"))};return n=null!=n.attr("pin")?annonces_data.url+"/modules/annonce/asset/img/pin-"+n.attr("pin")+".png":annonces_data.url+"/modules/annonce/asset/img/pin-red.png",new google.maps.Marker({position:a,map:e,animation:google.maps.Animation.DROP,icon:n})}function annonceCreateInfoWindow(n){return new google.maps.InfoWindow({content:n.html()})}function annonceDisplayMapMarkers(n,e,t,o){for(var r=0;r<e.length;r++)n[r].attr("taxonomy").split(",").forEach(function(a){o.forEach(function(n){a==n&&e[r].setMap(t)})})}jQuery(document).ready(function(){annonceInit()});