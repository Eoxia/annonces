function annonceInit(){annonceInitMap()}function annonceInitMap(){var n=jQuery("#annonces-map-wrapper");jQuery(n).each(function(){annonceCreateMap(jQuery(this))})}function annonceCreateMap(n){var e,a,t,o,r,i,s;null!=n&&0!=n.length&&(e=n,a=jQuery(e).find("marker"),t=new google.maps.LatLng(a.attr("lat"),a.attr("lng")),o=[],i={zoom:8,center:t,fullscreenControl:!(r=[])},s=new google.maps.Map(jQuery(e).find("#annonces-google-map")[0],i),jQuery(a).each(function(){var n=annonceCreateMarker(s,jQuery(this)),a=annonceCreateInfoWindow(jQuery(this));0!=jQuery(this).html().length&&n.addListener("click",function(){a.open(e,n)}),o.push(n),r.push(jQuery(this))}),jQuery(".annonces-taxonomies .taxonomy-label").on("click",function(){jQuery(this).hasClass("active")?(annonceDisplayMapMarkers(r,o,null,jQuery(this).attr("data-id").split(",")),jQuery(this).removeClass("active"),jQuery(this).next(".taxonomies-child").find(".taxonomy-label").removeClass("active")):(annonceDisplayMapMarkers(r,o,s,jQuery(this).attr("data-id").split(",")),jQuery(this).addClass("active"),jQuery(this).next(".taxonomies-child").find(".taxonomy-label").addClass("active"))}))}function annonceCreateMarker(n,a){var e,t=n,o=a,r={lat:Number(o.attr("lat")),lng:Number(o.attr("lng"))};return e=null!=o.attr("pin")?annonces_data.url+"/modules/annonce/asset/img/pin-"+o.attr("pin")+".png":annonces_data.url+"/modules/annonce/asset/img/pin-red.png",new google.maps.Marker({position:r,map:t,animation:google.maps.Animation.DROP,icon:e})}function annonceCreateInfoWindow(n){return new google.maps.InfoWindow({content:n.html()})}function annonceDisplayMapMarkers(n,e,t,o){for(var r=0;r<e.length;r++){n[r].attr("taxonomy").split(",").forEach(function(a){o.forEach(function(n){a==n&&e[r].setMap(t)})})}}jQuery(document).ready(function(){annonceInit()});